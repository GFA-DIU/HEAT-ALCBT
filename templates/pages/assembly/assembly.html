{% extends "_base.html" %}
{% load static %}

{% block content %}
<h1>Assembly creation</h1>


<form>
    {% csrf_token %}
    
    <!-- Row for Assembly Name and Country -->
    <div class="row mb-3">
        <!-- Assembly Name -->
        <div class="col-md-6">
            <label for="{{ form.assembly_name.id_for_label }}" class="form-label">Assembly Name:</label>
            {{ form.assembly_name }}
            <div class="invalid-feedback">
                Please provide an assembly name.
            </div>
        </div>
        
        <!-- Country -->
        <div class="col-md-6">
            <label for="{{ form.country.id_for_label }}" class="form-label">Country:</label>
            {{ form.country }}
            <div class="invalid-feedback">
                Please select a country.
            </div>
        </div>
    </div>
    
    <!-- Row for Measurement type and Toggle Button -->
    <div class="row mb-3 align-items-center">
        <!-- Measurement type -->
        <div class="col-md-6">
            <label for="{{ form.measurement_type.id_for_label }}" class="form-label">Measurement type:</label>
            {{ form.measurement_type }}
            <div class="invalid-feedback">
                Please select a measurement type.
            </div>
        </div>
        
        <!-- Public Toggle -->
        <div class="col-md-6">
            <div class="form-check form-switch"> <!-- Add margin-top to align with the measurement field -->
                <label class="form-check-label" for="{{ form.public.id_for_label }}">Public</label>
                {{ form.public }}
            </div>
        </div>
    </div>
    
    <!-- Materials Selection Section -->
    <div class="mt-4">
        <h3>Selected Materials</h3>
        
        <!-- Selected Materials List -->
        <div class="card mb-3">
            <div class="card-body" id="selected-materials" style="height: 150px; overflow-y: auto;">
                {% include "pages/assembly/material_list/material_list_delete.html" %} 
                <!-- Dynamically populated list of selected materials -->
            </div>
        </div>
        

        
    </div>

    <input type="hidden" name="action" value="submitted"> 
    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary">Save Changes</button>
</form>

<div id="response" class="mt-3"></div>

<h3>Material Library</h3>
<!-- Search Box -->
<div class="input-group mb-3">
    <input type="text" id="material-search" class="form-control" placeholder="Search materials...">
</div>

<!-- Materials List -->
<div class="card mb-3" style="height: calc(3 * 4rem); overflow-y: auto;">
    <div class="card-body">
        <div id="material-list">
            <p id="no-results-message" class="text-muted text-center m-0" style="display: none;">No results found</p>   
            {% include "pages/assembly/material_list/material_list_add.html" %}  
        </div>
    </div>
</div>


{% endblock %}